<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>PreferencesManager.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">debugAndroidTest</a> &gt; <a href="index.source.html" class="el_package">universum.studios.android.preference</a> &gt; <span class="el_source">PreferencesManager.java</span></div><h1>PreferencesManager.java</h1><pre class="source lang-java linenums">/*
 * =================================================================================================
 *                             Copyright (C) 2016 Universum Studios
 * =================================================================================================
 *         Licensed under the Apache License, Version 2.0 or later (further &quot;License&quot; only).
 * -------------------------------------------------------------------------------------------------
 * You may use this file only in compliance with the License. More details and copy of this License
 * you may retrieve at
 *
 * 		http://www.apache.org/licenses/LICENSE-2.0
 *
 * You can redistribute, modify or publish any part of the code written within this file but as it
 * is described in the License, the software distributed under the License is distributed on an
 * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES or CONDITIONS OF ANY KIND.
 *
 * See the License for the specific language governing permissions and limitations under the License.
 * =================================================================================================
 */
package universum.studios.android.preference;

import android.content.Context;
import android.content.SharedPreferences;
import android.preference.PreferenceManager;
import android.support.annotation.IntDef;
import android.support.annotation.NonNull;
import android.support.annotation.Nullable;
import android.support.annotation.StringRes;
import android.text.TextUtils;

import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;

/**
 * Manager that may be used to simplify management (storing + obtaining) of values presented within
 * a {@link SharedPreferences} of an Android application.
 *
 * &lt;h3&gt;Primitive types&lt;/h3&gt;
 * The following methods can be used to store primitive types within shared preferences:
 * &lt;ul&gt;
 * &lt;li&gt;{@link #putInt(String, int)} - {@link #getInt(String, int)}&lt;/li&gt;
 * &lt;li&gt;{@link #putFloat(String, float)} - {@link #getInt(String, int)}&lt;/li&gt;
 * &lt;li&gt;{@link #putLong(String, long)} - {@link #getLong(String, long)}&lt;/li&gt;
 * &lt;li&gt;{@link #putBoolean(String, boolean)} - {@link #getBoolean(String, boolean)}&lt;/li&gt;
 * &lt;li&gt;{@link #putString(String, String)} - {@link #getString(String, String)}&lt;/li&gt;
 * &lt;/ul&gt;
 *
 * &lt;h3&gt;Arrays + Lists&lt;/h3&gt;
 * See {@code ArrayPreference} and {@code ListPreference}.
 *
 * &lt;h3&gt;Shared preferences&lt;/h3&gt;
 * The PreferencesManager is closely related with {@link SharedPreference}. You can use any implementation
 * of SharedPreference class to represent any of your shared preference values. The following methods
 * can be used to store/retrieve actual values of these preferences:
 * &lt;ul&gt;
 * &lt;li&gt;{@link #putPreference(SharedPreference, Object)} - {@link #getPreference(SharedPreference)}&lt;/li&gt;
 * &lt;/ul&gt;
 *
 * &lt;h3&gt;Sample implementation&lt;/h3&gt;
 * &lt;pre&gt;
 * public class AppPreferences extends PreferencesManager {
 *
 *      // Key for the first app launch preference.
 *      private static final String KEY_APP_FIRST_LAUNCH = &quot;.AppFirstLaunch&quot;;
 *
 *      // Name of the shared preferences.
 *      private final String mPrefsName;
 *
 *      // Creates a new instance of AppPreferences manager.
 *      public AppPreferences(Context context) {
 *          super(context);
 *          this.mPrefsName = getSharedPreferencesName();
 *      }
 *
 *      // Stores a boolean flag into shared preferences indicating whether this is a first launch
 *      // of this app or not.
 *      public void saveIsAppFirstLaunch(boolean first) {
 *          putBoolean(mPrefsName + KEY_APP_FIRST_LAUNCH, first);
 *      }
 *
 *      // Returns a boolean flag from shared preferences indicating whether this is a first launch
 *      // of this app or not.
 *      public boolean isAppFirstLaunch() {
 *          return getBoolean(mPrefsName + KEY_APP_FIRST_LAUNCH, true);
 *      }
 * }
 * &lt;/pre&gt;
 *
 * @author Martin Albedinsky
 */
public class PreferencesManager extends SimpleSharedPreferencesFacade {

	/*
	 * Constants ===================================================================================
	 */

	/**
	 * Log TAG.
	 */
	// private static final String TAG = &quot;PreferencesManager&quot;;

	/**
	 * &lt;b&gt;This constant has been deprecated and will be removed in the next release.&lt;/b&gt;
	 * &lt;p&gt;
	 * Wrapped mode: {@link Context#MODE_PRIVATE}
	 *
	 * @deprecated Use {@link SharedPreferencesPolicy#FILE_MODE_PRIVATE} instead.
	 */
	@Deprecated
	public static final int MODE_PRIVATE = Context.MODE_PRIVATE;

	/**
	 * &lt;b&gt;This constant has been deprecated and will be removed in the next release.&lt;/b&gt;
	 * &lt;p&gt;
	 * Wrapped mode: {@link Context#MODE_MULTI_PROCESS}
	 *
	 * @deprecated Deprecated due to deprecation in the framework. See {@link Context#MODE_MULTI_PROCESS}.
	 */
	@Deprecated
	public static final int MODE_MULTI_PROCESS = 0x0004;

	/**
	 * &lt;b&gt;This constant has been deprecated and will be removed in the next release.&lt;/b&gt;
	 * &lt;p&gt;
	 * Wrapped mode: {@link Context#MODE_ENABLE_WRITE_AHEAD_LOGGING}
	 *
	 * @deprecated This flag is appropriate only for database files.
	 */
	@Deprecated
	public static final int MODE_ENABLE_WRITE_AHEAD_LOGGING = 0x0008;

	/**
	 * &lt;b&gt;This constant has been deprecated and will be removed in the next release.&lt;/b&gt;
	 * &lt;p&gt;
	 * Wrapped mode: {@link Context#MODE_APPEND}
	 *
	 * @deprecated Use {@link SharedPreferencesPolicy#FILE_MODE_APPEND} instead.
	 */
	@Deprecated
	public static final int MODE_APPEND = Context.MODE_APPEND;

	/**
	 * &lt;b&gt;This annotation has been deprecated and will be removed in the next release.&lt;/b&gt;
	 * &lt;p&gt;
	 * Defines an annotation for determining set of allowed flags for {@link #setMode(int)} method.
	 *
	 * @deprecated Use {@link SharedPreferencesPolicy.FileMode @SharedPreferencesPolicy.FileMode} instead.
	 */
	@Retention(RetentionPolicy.SOURCE)
	@IntDef({MODE_PRIVATE, MODE_MULTI_PROCESS, MODE_ENABLE_WRITE_AHEAD_LOGGING, MODE_APPEND})
	@Deprecated
	public @interface Mode {
	}

	/*
	 * Interface ===================================================================================
	 */

	/*
	 * Static members ==============================================================================
	 */

	/*
	 * Members =====================================================================================
	 */

	/**
	 * Context that has been specified during initialization of this manager instance.
	 */
	@NonNull
	protected final Context mContext;

	/**
	 * Name of the shared preferences managed by this manager.
	 */
	private final String mPreferencesName;

	/**
	 * File mode of the shared preferences managed by this manager.
	 */
	@SharedPreferencesPolicy.FileMode
	private final int mPreferencesFileMode;

	/**
	 * Flag indicating whether caching of the actual values of each shared preference is enabled.
	 * This means that, if shared preference holds actual value which is same as in shared preferences,
	 * parsing of that value will be not performed, instead actual value will be obtained from that
	 * preference object.
	 */
	private boolean mCachingEnabled;

	/*
	 * Constructors ================================================================================
	 */

	/**
	 * &lt;b&gt;This constructor has been deprecated and will be removed in the next release.&lt;/b&gt;
	 * &lt;p&gt;
	 * Same as {@link #PreferencesManager(Context, String)} with default name for
	 * preferences (like the one provided by Android framework).
	 *
	 * @deprecated Use {@link #PreferencesManager(Builder)} instead.
	 */
	@Deprecated
	public PreferencesManager(@NonNull Context context) {
<span class="nc" id="L205">		this(new Builder(context)</span>
<span class="nc" id="L206">				.preferences(context.getSharedPreferences(</span>
<span class="nc" id="L207">						SharedPreferencesPolicy.defaultPreferencesName(context),</span>
						SharedPreferencesPolicy.FILE_MODE_PRIVATE
				))
<span class="nc" id="L210">				.preferencesName(SharedPreferencesPolicy.defaultPreferencesName(context))</span>
		);
<span class="nc" id="L212">	}</span>

	/**
	 * &lt;b&gt;This constructor has been deprecated and will be removed in the next release.&lt;/b&gt;
	 * &lt;p&gt;
	 * Same as {@link #PreferencesManager(Context, String, int)} with {@link Context#MODE_PRIVATE}
	 * creation mode.
	 *
	 * @deprecated Use {@link #PreferencesManager(Builder)} instead.
	 */
	@Deprecated
	public PreferencesManager(@NonNull Context context, @NonNull String preferencesName) {
<span class="nc" id="L224">		this(new Builder(context)</span>
<span class="nc" id="L225">				.preferences(context.getSharedPreferences(preferencesName, SharedPreferencesPolicy.FILE_MODE_PRIVATE))</span>
<span class="nc" id="L226">				.preferencesName(preferencesName)</span>
		);
<span class="nc" id="L228">	}</span>

	/**
	 * &lt;b&gt;This constructor has been deprecated and will be removed in the next release.&lt;/b&gt;
	 * &lt;p&gt;
	 * Creates a new instance of PreferencesManager with the given shared preferences name and
	 * preferences file creation mode.
	 *
	 * @param context             Valid context to access shared preferences.
	 * @param preferencesName     Name for shared preferences file.
	 * @param preferencesFileMode Shared preferences will be created in this mode.
	 * @deprecated Use {@link #PreferencesManager(Builder)} instead.
	 */
	@Deprecated
	public PreferencesManager(@NonNull Context context, @NonNull String preferencesName, @SharedPreferencesPolicy.FileMode int preferencesFileMode) {
<span class="nc" id="L243">		this(new Builder(context)</span>
<span class="nc" id="L244">				.preferences(context.getSharedPreferences(preferencesName, preferencesFileMode))</span>
<span class="nc" id="L245">				.preferencesName(preferencesName)</span>
<span class="nc" id="L246">				.preferencesFileMode(preferencesFileMode)</span>
		);
<span class="nc" id="L248">	}</span>

	/**
	 * todo:
	 *
	 * @param builder
	 */
	protected PreferencesManager(@NonNull final Builder builder) {
<span class="fc" id="L256">		super(builder);</span>
<span class="fc" id="L257">		this.mContext = builder.context;</span>
<span class="fc" id="L258">		this.mPreferencesName = builder.preferencesName;</span>
<span class="fc" id="L259">		this.mPreferencesFileMode = builder.preferencesFileMode;</span>
<span class="fc" id="L260">	}</span>

	/*
	 * Methods =====================================================================================
	 */

	/**
	 * Returns the name of {@link SharedPreferences} that are managed by this manager.
	 *
	 * @return The associated preference's name.
	 * @see Builder#preferencesName(String)
	 * @see #getPreferences()
	 * @see #getPreferencesFileMode()
	 */
	@NonNull
	public final String getPreferencesName() {
<span class="fc" id="L276">		return mPreferencesName;</span>
	}

	/**
	 * Returns the file mode of {@link SharedPreferences} that are managed by this manager.
	 *
	 * @return The associated preference's file mode.
	 * @see Builder#preferencesFileMode(int)
	 * @see #getPreferences()
	 * @see #getPreferencesName()
	 */
	@SharedPreferencesPolicy.FileMode
	public final int getPreferencesFileMode() {
<span class="fc" id="L289">		return mPreferencesFileMode;</span>
	}

	/**
	 * Enables/disables the caching {@link universum.studios.android.preference.SharedPreference}'s values.
	 *
	 * @param enabled {@code True} to enable caching, {@code false} to disable.
	 * @see #isCachingEnabled()
	 */
	public final void setCachingEnabled(final boolean enabled) {
<span class="fc" id="L299">		this.mCachingEnabled = enabled;</span>
<span class="fc" id="L300">	}</span>

	/**
	 * Returns flag indicating whether the caching of {@link universum.studios.android.preference.SharedPreference}'s
	 * values is enabled or not.
	 *
	 * @return {@code True} if caching is enabled, {@code false} otherwise.
	 * @see #setCachingEnabled(boolean)
	 */
	public final boolean isCachingEnabled() {
<span class="fc" id="L310">		return mCachingEnabled;</span>
	}

	/**
	 * Returns a string key for the specified &lt;var&gt;resId&lt;/var&gt;.
	 *
	 * @param resId Resource id of the desired preference key.
	 * @return String key obtained from the context specified for this manager.
	 */
	@NonNull
	protected final String key(@StringRes final int resId) {
<span class="fc" id="L321">		return mContext.getString(resId);</span>
	}

	/**
	 * Persists the given &lt;var&gt;value&lt;/var&gt; for the specified &lt;var&gt;preference&lt;/var&gt; into {@link SharedPreferences}
	 * that are managed by this manager.
	 *
	 * @param preference Preference for which to persist the value.
	 * @param value      The value to be persisted.
	 * @param &lt;T&gt;        Type of the value associated with the preference.
	 * @return {@code True} if put has been successful, {@code false} otherwise.
	 * @see #getPreference(SharedPreference)
	 * @see #containsPreference(SharedPreference)
	 * @see #removePreference(SharedPreference)
	 * @see SharedPreference#updateValue(Object)
	 * @see SharedPreference#putIntoPreferences(SharedPreferences)
	 */
	public final &lt;T&gt; boolean putPreference(@NonNull final SharedPreference&lt;T&gt; preference, @Nullable final T value) {
<span class="fc" id="L339">		final boolean result = preference.updateValue(value).putIntoPreferences(getPreferences());</span>
<span class="fc bfc" id="L340" title="All 2 branches covered.">		if (!mCachingEnabled) {</span>
<span class="fc" id="L341">			preference.invalidate();</span>
		}
<span class="fc" id="L343">		return result;</span>
	}

	/**
	 * Obtains the value for the given &lt;var&gt;preference&lt;/var&gt; from {@link SharedPreferences} that are
	 * managed by this manager.
	 *
	 * @param preference Preference for which to obtain its associated value.
	 * @param &lt;T&gt;        Type of the value associated with the preference.
	 * @return Value associated with the preference. May be {@code null} if there is no value persisted
	 * for the preference yet.
	 * @see #putPreference(SharedPreference, Object)
	 * @see #contains(String)
	 * @see SharedPreference#getFromPreferences(SharedPreferences)
	 */
	@Nullable
	public final &lt;T&gt; T getPreference(@NonNull final SharedPreference&lt;T&gt; preference) {
<span class="fc" id="L360">		final T value = preference.getFromPreferences(getPreferences());</span>
<span class="fc bfc" id="L361" title="All 2 branches covered.">		if (!mCachingEnabled) {</span>
<span class="fc" id="L362">			preference.invalidate();</span>
		}
<span class="fc" id="L364">		return value;</span>
	}

	/**
	 * Checks whether there is value associated with the specified &lt;var&gt;preference&lt;/var&gt; contained
	 * within {@link SharedPreferences} that are managed by this manager.
	 *
	 * @param preference The desired preference of which value's presence to check.
	 * @return {@code True} if there is value contained for key of the specified preference,
	 * {@code false} otherwise.
	 * @see #putPreference(SharedPreference, Object)
	 * @see #getPreference(SharedPreference)
	 * @see #removePreference(SharedPreference)
	 */
	public final boolean containsPreference(@NonNull final SharedPreference preference) {
<span class="fc" id="L379">		return contains(preference.getKey());</span>
	}

	/**
	 * Removes a value for the specified &lt;var&gt;preference&lt;/var&gt; from {@link SharedPreferences} that
	 * are managed by this manager.
	 *
	 * @param preference The preference for which to remove its associated value.
	 * @return {@code True} if removal has been successful, {@code false} otherwise.
	 * @see #putPreference(SharedPreference, Object)
	 * @see #getPreference(SharedPreference)
	 * @see #containsPreference(SharedPreference)
	 */
	public final boolean removePreference(@NonNull final SharedPreference preference) {
<span class="fc" id="L393">		return remove(preference.getKey());</span>
	}

	// fixme: deprecated methods that should be removed in the next release

	/**
	 * &lt;b&gt;This method has been deprecated and will be removed in the next release.&lt;/b&gt;
	 * &lt;p&gt;
	 * Creates a default name for shared preferences (like the one created by {@link PreferenceManager}).
	 *
	 * @param context Context for which the name should be created.
	 * @return Default name for shared preferences.
	 * @deprecated Use {@link SharedPreferencesPolicy#defaultPreferencesName(Context)} instead.
	 */
	@NonNull
	@Deprecated
	public static String defaultSharedPreferencesName(@NonNull Context context) {
<span class="nc" id="L410">		return SharedPreferencesPolicy.defaultPreferencesName(context);</span>
	}

	/**
	 * &lt;b&gt;This method has been deprecated and will be removed in the next release.&lt;/b&gt;
	 * &lt;p&gt;
	 * Sets the actual file creation mode for shared preferences. This mode is used whenever the
	 * instance of shared preferences is obtained to put/retrieve data to/from them.
	 *
	 * @param mode Preferences creation mode.
	 * @see #getMode()
	 * @deprecated The new implementation of preferences manager does not support changing of preferences
	 * file mode after the manager has been initialized.
	 */
	@Deprecated
	protected final void setMode(@Mode int mode) {
		// Actual implementation of this manager does not support changing of preferences file mode.
<span class="nc" id="L427">	}</span>

	/**
	 * &lt;b&gt;This method has been deprecated and will be removed in the next release.&lt;/b&gt;
	 * &lt;p&gt;
	 * Returns the actual file creation mode for shared preferences.
	 *
	 * @return The shared preferences file creation mode. {@link #MODE_PRIVATE} by default.
	 * @see Context
	 * @see #setMode(int)
	 * @deprecated Use {@link #getPreferencesFileMode()} instead.
	 */
	@Deprecated
	protected final int getMode() {
<span class="nc" id="L441">		return getPreferencesFileMode();</span>
	}

	/**
	 * &lt;b&gt;This method has been deprecated and will be removed in the next release.&lt;/b&gt;
	 * &lt;p&gt;
	 * Sets the actual name for shared preferences. This name is used whenever the instance of shared
	 * preferences is needed to put/retrieve data to/from it.
	 * &lt;p&gt;
	 * &lt;b&gt;Note&lt;/b&gt;, that you can set this to {@code null} to retrieve always default shared preferences.
	 *
	 * @param name The desired name for shared preferences.
	 * @see #getSharedPreferencesName()
	 * @see #getSharedPreferences()
	 * @deprecated The new implementation of preferences manager does not support changing of preferences
	 * name after the manager has been initialized.
	 */
	@Deprecated
	protected final void setSharedPreferencesName(@Nullable String name) {
		// Actual implementation of this manager does not support changing of preferences name.
<span class="nc" id="L461">	}</span>

	/**
	 * &lt;b&gt;This method has been deprecated and will be removed in the next release.&lt;/b&gt;
	 * &lt;p&gt;
	 * Returns the actual name for shared preferences.
	 *
	 * @return Name used to retrieve shared preferences.
	 * @see #setSharedPreferencesName(String)
	 * @deprecated Use {@link #getPreferencesName()} instead.
	 */
	@Nullable
	@Deprecated
	protected final String getSharedPreferencesName() {
<span class="nc" id="L475">		return getPreferencesName();</span>
	}

	/**
	 * &lt;b&gt;This method has been deprecated and will be removed in the next release.&lt;/b&gt;
	 * &lt;p&gt;
	 * Returns the instance of SharedPreferences depends on the current file creation mode and
	 * preferences name. If there is not currently provided name for shared preferences, the default
	 * one will be used.
	 *
	 * @return Instance of shared preferences.
	 * @see #setMode(int)
	 * @see #setSharedPreferencesName(String)
	 * @deprecated Use {@link #getPreferences()} instead.
	 */
	@NonNull
	@Deprecated
	public SharedPreferences getSharedPreferences() {
<span class="nc" id="L493">		return getPreferences();</span>
	}

	/*
	 * Inner classes ===============================================================================
	 */

	/**
	 * Builder that may be used to creates new instances of PreferencesManager with a desired configuration.
	 *
	 * &lt;h3&gt;Required parameters&lt;/h3&gt;
	 * &lt;ul&gt;
	 * &lt;li&gt;{@code none}&lt;/li&gt;
	 * &lt;/ul&gt;
	 *
	 * @author Martin Albedinsky
	 */
	public static class Builder extends SimpleSharedPreferencesFacade.Builder&lt;Builder&gt; {

		/**
		 * See {@link PreferencesManager#mContext}.
		 */
		final Context context;

		/**
		 * See {@link PreferencesManager#mPreferencesName}.
		 */
		String preferencesName;

		/**
		 * See {@link PreferencesManager#mPreferencesFileMode}.
		 */
<span class="fc" id="L525">		@SharedPreferencesPolicy.FileMode</span>
		int preferencesFileMode = SharedPreferencesPolicy.FILE_MODE_PRIVATE;

		/**
		 * Creates a new Builder with the specified &lt;var&gt;context&lt;/var&gt;.
		 *
		 * @param context The context that is used to create default preferences instance for this
		 *                builder if there is no explicit instance of preferences specified.
		 */
		public Builder(@NonNull final Context context) {
<span class="fc" id="L535">			super();</span>
<span class="fc" id="L536">			this.context = context;</span>
<span class="fc" id="L537">		}</span>

		/**
		 * Specifies a name for shared preferences that is used to create default preferences instance
		 * in case when there is no explicit instance of preferences specified for this builder via
		 * {@link #preferences(SharedPreferences)}.
		 * &lt;p&gt;
		 * Also the specified name may be used later in order to identify preferences instance via
		 * {@link PreferencesManager#getPreferencesName()}.
		 *
		 * @param name The desired name for preferences. May be {@code null} in order to use default
		 *             name for preferences.
		 * @return This builder to allow methods chaining.
		 * @see SharedPreferencesPolicy#defaultPreferencesName(Context)
		 */
		public Builder preferencesName(@Nullable final String name) {
<span class="fc" id="L553">			this.preferencesName = name;</span>
<span class="fc" id="L554">			return this;</span>
		}

		/**
		 * Specifies a file mode for shared preferences that is used to create default preferences
		 * instance in case when there is no explicit instance of preferences specified for this builder
		 * via {@link #preferences(SharedPreferences)}.
		 * &lt;p&gt;
		 * Also the specified mode may be used later in order to identify preferences file mode via
		 * {@link PreferencesManager#getPreferencesFileMode()}.
		 *
		 * @param fileMode The desired file mode for preferences. Should be one of modes defined by
		 *                 {@link SharedPreferencesPolicy.FileMode @SharedPreferencesPolicy.FileMode}
		 *                 annotation.
		 * @return This builder to allow methods chaining.
		 */
		public Builder preferencesFileMode(@SharedPreferencesPolicy.FileMode final int fileMode) {
<span class="fc" id="L571">			this.preferencesFileMode = fileMode;</span>
<span class="fc" id="L572">			return this;</span>
		}

		/**
		 * Builds a new instance of PreferencesManager with the configuration specified for this builder.
		 *
		 * @return Instance of preferences manager ready to be used.
		 * @throws IllegalArgumentException If some of the required parameters is missing.
		 */
		@NonNull
		@Override
		public PreferencesManager build() {
<span class="fc bfc" id="L584" title="All 2 branches covered.">			if (TextUtils.isEmpty(preferencesName)) {</span>
<span class="fc" id="L585">				this.preferencesName = SharedPreferencesPolicy.defaultPreferencesName(context);</span>
			}
<span class="pc bpc" id="L587" title="1 of 2 branches missed.">			if (preferences == null) {</span>
<span class="fc" id="L588">				this.preferences = context.getSharedPreferences(preferencesName, preferencesFileMode);</span>
			}
<span class="fc" id="L590">			return new PreferencesManager(this);</span>
		}
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span>Generated by the Android Gradle plugin 2.3.0</div></body></html>